---
import { games } from "../data/actions";

const gameDescriptions: Record<string, string> = {
  gi:
    "Monitor your Original Resin, daily commissions, expeditions, Serenitea Pot, Spiral Abyss, and more. Never miss a resin cap or a daily reward again.",
  hsr:
    "Keep an eye on your Trailblaze Power and current warp banners. Stay on top of your daily check-ins without opening the app.",
  zzz:
    "Track your Battery Charge and Signal Search banners at a glance. Claim daily rewards directly from your Stream Deck.",
};
---

<section id="games" class="px-6 py-24 lg:py-32">
  <div class="mx-auto max-w-6xl">
    <div class="mb-12 text-center" data-animate="fade-up">
      <h2 class="mb-4 text-3xl font-bold tracking-tight text-foreground sm:text-4xl">
        Supported Games
      </h2>
      <p class="mx-auto max-w-2xl text-lg text-muted-foreground">
        Track your stats and manage your HoYoverse games directly from your Stream Deck.
      </p>
    </div>

    <div class="grid gap-6 md:grid-cols-2">
      {
        games.map((game) => (
          <div
            class="overflow-hidden rounded-xl border border-white/10 bg-card"
            data-animate="fade-up"
          >
            {/* Banner header with title + description overlay */}
            <div
              class="relative flex h-52 items-end bg-cover bg-center"
              style={`background-image: url('/banners/${game.id}.webp');`}
            >
              {/* Dark overlay for text readability */}
              <div class="absolute inset-0 bg-linear-to-t from-black/80 via-black/40 to-transparent" />
              {/* Backdrop layer with dissolve mask — only affects background */}
              <div class="absolute inset-x-0 bottom-0 h-full bg-black/40 mask-[linear-gradient(to_bottom,transparent,black_30%)]" />
              {/* Text content — not masked */}
              <div class="relative flex flex-col gap-2 px-5 py-3 drop-shadow-[0_2px_12px_rgba(0,0,0,0.8)]">
                <div class="flex items-center gap-3">
                  <img
                    src={`/icons/${game.id}.webp`}
                    alt={game.name}
                    class="size-12 object-contain rounded-sm"
                  />
                  <h3 class="text-2xl font-bold text-white">{game.name}</h3>
                </div>
                <p class="text-sm leading-relaxed text-white/80">
                  {gameDescriptions[game.id]}
                </p>
              </div>
            </div>

            {/* Card body */}
            <div class="p-6">

              {/* Actions grid */}
              <div class="grid grid-cols-2 gap-3">
                {game.actions.map((action) => (
                    <div class="flex items-center gap-3 rounded-lg border border-white/5 bg-muted/20 p-3">
                    <div class="flex size-12 shrink-0 items-center justify-center rounded-md border border-muted-foreground/20 bg-muted/30">
                      <span class="text-[8px] text-muted-foreground">icon</span>
                    </div>
                    <div class="flex min-w-0 flex-col gap-0.5">
                      <span class="text-sm font-medium text-foreground">
                        {action.name}
                      </span>
                      <span class="line-clamp-2 text-xs leading-snug text-muted-foreground">
                        {action.description}
                      </span>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>
